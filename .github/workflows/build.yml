name: üöÄ Build DRXQVLN LAUNCHER

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
      
    - name: üì¶ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: üîß Install dependencies
      run: npm install
      
    - name: ‚öõÔ∏è Build React app
      run: npm run react-build
      
    - name: üñ•Ô∏è Build Electron app
      run: npm run dist
      env:
        GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        
    - name: üì§ Upload artifacts
      uses: actions/upload-artifact@v4
      with:
        name: DRXQVLN-LAUNCHER-Windows
        path: dist/*.exe
        
    - name: üéâ Create Release (if tag)
      if: startsWith(github.ref, 'refs/tags/')
      uses: softprops/action-gh-release@v1
      with:
        files: dist/*.exe
        name: "DRXQVLN LAUNCHER ${{ github.ref_name }}"
        body: |
          üöÄ **DRXQVLN LAUNCHER** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞
          
          üì• **–°–∫–∞—á–∞—Ç—å:**
          - Windows .exe —Ñ–∞–π–ª –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
          - –ù–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
          
          üé® **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
          - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —á–µ—Ä–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–∏–∑–∞–π–Ω
          - –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã
          - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
          - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ç–∏–ª–∏—Ç–∞–º–∏
          
          ‚ö° **–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ .exe —Ñ–∞–π–ª!
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
